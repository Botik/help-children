{% extends 'base_panel_wrapper.twig' %}

{% import 'panel/users/table.twig' as table %}
{% block css %}<style type="text/css">td,th {
padding: 0.75rem 0.3rem !important;
word-wrap: anywhere;
max-width: min-content;
}</style>{% endblock %}
{% block content %}
    <div class="container">
        {% include 'panel/menu.twig' %}
        <div class="row" style="background-color: #f1f2f3; padding: 20px 40px;">
            <div class="col-sm">
                <h1>Пользователи:</h1>
                {{ table.table(users) }}
            </div>
        </div>
    </div>
    <script type="text/javascript">
    	function delus(id) {
	    	var xhr = new XMLHttpRequest();
			xhr.open('GET', '/panel/users/'+id+'/delete', false);
			xhr.send();
			if (xhr.status != 200) {
			  alert( xhr.status + ': ' + xhr.statusText ); 
			} else {
			  if (xhr.responseText=='ok') event.target.parentElement.parentElement.remove();
			  if (xhr.responseText=='subs') event.target.parentElement.innerHTML='Подписка';
			}
		}
    </script>
{% endblock %}
